<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="方法引用( 双冒号:: )方法引用分为三种，方法引用通过一对双冒号:: 来表示，方法引用是一种函数式接口的另一种书写方式  静态方法引用，通过类名::静态方法名， 如 Integer::parseInt 实例方法引用，通过实例对象::实例方法，如 str::substring 构造方法引用，通过类名::new， 如 User::new  使用通过方法引用，可以将方法的引用赋值给一个变量,通过赋值给">
<meta property="og:type" content="article">
<meta property="og:title" content="Java8 Stream">
<meta property="og:url" content="https://cdongtao.github.io/2021/02/19/Java-Java8%20Stream/index.html">
<meta property="og:site_name" content="cdongtao">
<meta property="og:description" content="方法引用( 双冒号:: )方法引用分为三种，方法引用通过一对双冒号:: 来表示，方法引用是一种函数式接口的另一种书写方式  静态方法引用，通过类名::静态方法名， 如 Integer::parseInt 实例方法引用，通过实例对象::实例方法，如 str::substring 构造方法引用，通过类名::new， 如 User::new  使用通过方法引用，可以将方法的引用赋值给一个变量,通过赋值给">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdongtao.github.io/img/Java8-Stream.png">
<meta property="og:image" content="https://cdongtao.github.io/img/%E9%A1%BA%E5%BA%8F%E6%B5%81%E4%B8%8E%E5%B9%B6%E8%A1%8C%E6%B5%81.png">
<meta property="og:image" content="https://cdongtao.github.io/img/%E9%81%8D%E5%8E%86%E4%B8%8E%E5%8C%B9%E9%85%8D.png">
<meta property="og:image" content="https://cdongtao.github.io/img/%E8%81%9A%E5%90%88.png">
<meta property="og:image" content="https://cdongtao.github.io/img/%E6%98%A0%E5%B0%84.png">
<meta property="og:image" content="https://cdongtao.github.io/img/Stream-%E6%8F%90%E5%8F%961.png">
<meta property="og:image" content="https://cdongtao.github.io/img/Stream-%E6%8F%90%E5%8F%962.png">
<meta property="og:image" content="https://cdongtao.github.io/img/Stream-%E6%8F%90%E5%8F%963.png">
<meta property="article:published_time" content="2021-02-19T15:17:50.967Z">
<meta property="article:modified_time" content="2021-04-11T11:07:06.665Z">
<meta property="article:author" content="cdongtao">
<meta property="article:tag" content="Stream">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdongtao.github.io/img/Java8-Stream.png">



  <link rel="alternate" href="/atom.xml" title="cdongtao" type="application/atom+xml" />




  <link rel="canonical" href="https://cdongtao.github.io/2021/02/19/Java-Java8 Stream/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Java8 Stream | cdongtao</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">cdongtao</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://cdongtao.github.io/2021/02/19/Java-Java8%20Stream/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cdongtao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cdongtao">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java8 Stream
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2021-02-19 23:17:50" itemprop="dateCreated datePublished" datetime="2021-02-19T23:17:50+08:00">2021-02-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2021-04-11 19:07:06" itemprop="dateModified" datetime="2021-04-11T19:07:06+08:00">2021-04-11</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SpringBoot/" itemprop="url" rel="index"><span itemprop="name">SpringBoot</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/02/19/Java-Java8%20Stream/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2021/02/19/Java-Java8%20Stream/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon"
            >
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">61k 字</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">55 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="方法引用-双冒号"><a href="#方法引用-双冒号" class="headerlink" title="方法引用( 双冒号:: )"></a>方法引用( 双冒号:: )</h2><p>方法引用分为三种，方法引用通过一对双冒号:: 来表示，方法引用是一种函数式接口的另一种书写方式</p>
<ol>
<li>静态方法引用，通过类名::静态方法名， 如 Integer::parseInt</li>
<li>实例方法引用，通过实例对象::实例方法，如 str::substring</li>
<li>构造方法引用，通过类名::new， 如 User::new</li>
</ol>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>通过方法引用，可以将方法的引用赋值给一个变量,通过赋值给Function，说明方法引用也是一种函数式接口的书写方式，Lambda表达式也是一种函数式接口，Lambda表达式一般用于自己提供方法体，而方法引用一般直接引用现成的方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">    private String username;</span><br><span class="line">    private Integer age;</span><br><span class="line"></span><br><span class="line">    public User() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public User(String username, Integer age) &#123;</span><br><span class="line">        this.username &#x3D; username;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;User&#123;&quot; +</span><br><span class="line">                &quot;username&#x3D;&#39;&quot; + username + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, age&#x3D;&quot; + age +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Getter&amp;Setter</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static int parseInt(String s) throws NumberFormatException &#123;</span><br><span class="line">        return parseInt(s,10);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    &#x2F;&#x2F; 使用双冒号::来构造静态函数引用</span><br><span class="line">    Function&lt;String, Integer&gt; fun &#x3D; Integer::parseInt;</span><br><span class="line">    Integer value &#x3D; fun.apply(&quot;123&quot;);</span><br><span class="line">    System.out.println(value);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 使用双冒号::来构造非静态函数引用</span><br><span class="line">    String content &#x3D; &quot;Hello JDK8&quot;;</span><br><span class="line">    Function&lt;Integer, String&gt; func &#x3D; content::substring;</span><br><span class="line">    String result &#x3D; func.apply(1);</span><br><span class="line">    System.out.println(result);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 构造函数引用</span><br><span class="line">    BiFunction&lt;String, Integer, User&gt; biFunction &#x3D; User::new;</span><br><span class="line">    User user &#x3D; biFunction.apply(&quot;mengday&quot;, 28);</span><br><span class="line">    System.out.println(user.toString());</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 函数引用也是一种函数式接口，所以也可以将函数引用作为方法的参数</span><br><span class="line">    sayHello(String::toUpperCase, &quot;hello&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 方法有两个参数，一个是</span><br><span class="line">private static void sayHello(Function&lt;String, String&gt; func, String parameter)&#123;</span><br><span class="line">    String result &#x3D; func.apply(parameter);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Stream概述"><a href="#Stream概述" class="headerlink" title="Stream概述"></a><a href="https://zhuanlan.zhihu.com/p/299064490" target="_blank" rel="noopener">Stream概述</a></h2><p><img src="/img/Java8-Stream.png" alt="Java8 Stream" title="Java8 Stream"></p>
<p>什么是Stream?</p>
<ul>
<li>Stream将要处理的元素集合看作一种流，在流的过程中,借助Stream API对流中的元素进行操作，比如:筛选、排序、聚合等</li>
</ul>
<p>Stream可以由数组或集合创建，对流的操作分为两种:</p>
<ul>
<li>中间操作，每次返回一个新的流，可以有多个</li>
<li>终端操作，每个流只能进行一次终端操作，终端操作结束后流无法再次使用。终端操作会产生一个新的集合或值</li>
</ul>
<p>Stream有几个特性：</p>
<ul>
<li>stream不存储数据，而是按照特定的规则对数据进行计算，一般会输出结果</li>
<li>stream不会改变数据源，通常情况下会产生一个新的集合或一个值</li>
<li>stream具有延迟执行特性，只有调用终端操作时，中间操作才会执行</li>
</ul>
<h2 id="Stream的创建"><a href="#Stream的创建" class="headerlink" title="Stream的创建"></a>Stream的创建</h2><h3 id="通过-java-util-Collection-stream-方法用集合创建流"><a href="#通过-java-util-Collection-stream-方法用集合创建流" class="headerlink" title="通过 java.util.Collection.stream() 方法用集合创建流"></a>通过 java.util.Collection.stream() 方法用集合创建流</h3><p>实现Collection类的容器类,List/Map….</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list &#x3D; Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);</span><br><span class="line">&#x2F;&#x2F; 创建一个顺序流</span><br><span class="line">Stream&lt;String&gt; stream &#x3D; list.stream();</span><br><span class="line">&#x2F;&#x2F; 创建一个并行流</span><br><span class="line">Stream&lt;String&gt; parallelStream &#x3D; list.parallelStream();</span><br></pre></td></tr></table></figure>

<h3 id="使用java-util-Arrays-stream-T-array-方法用数组创建流"><a href="#使用java-util-Arrays-stream-T-array-方法用数组创建流" class="headerlink" title="使用java.util.Arrays.stream(T[] array)方法用数组创建流"></a>使用java.util.Arrays.stream(T[] array)方法用数组创建流</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int[] array&#x3D;&#123;1,3,5,6,8&#125;;</span><br><span class="line">IntStream stream &#x3D; Arrays.stream(array);</span><br></pre></td></tr></table></figure>

<h3 id="使用Stream的静态方法：of-、iterate-、generate"><a href="#使用Stream的静态方法：of-、iterate-、generate" class="headerlink" title="使用Stream的静态方法：of()、iterate()、generate()"></a>使用Stream的静态方法：of()、iterate()、generate()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream &#x3D; Stream.of(1, 2, 3, 4, 5, 6);</span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; stream2 &#x3D; Stream.iterate(0, (x) -&gt; x + 3).limit(4);</span><br><span class="line">stream2.forEach(System.out::println); &#x2F;&#x2F; 0 2 4 6 8 10</span><br><span class="line"></span><br><span class="line">Stream&lt;Double&gt; stream3 &#x3D; Stream.generate(Math::random).limit(3);</span><br><span class="line">stream3.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h3 id="stream和parallelStream的简单区分："><a href="#stream和parallelStream的简单区分：" class="headerlink" title="stream和parallelStream的简单区分："></a>stream和parallelStream的简单区分：</h3><p>stream是顺序流，由主线程按顺序对流执行操作，而parallelStream是并行流，内部以多线程并行执行的方式对流进行操作，但前提是流中的数据处理没有顺序要求。例如筛选集合中的奇数，两者的处理不同之处<br><img src="/img/%E9%A1%BA%E5%BA%8F%E6%B5%81%E4%B8%8E%E5%B9%B6%E8%A1%8C%E6%B5%81.png" alt="顺序流与并行流" title="顺序流与并行流"></p>
<p>除了直接创建并行流，还可以通过parallel()把顺序流转换成并行流<br>Optional<Integer> findFirst = list.stream().parallel().filter(x-&gt;x&gt;6).findFirst();</p>
<h2 id="Stream的使用"><a href="#Stream的使用" class="headerlink" title="Stream的使用"></a>Stream的使用</h2><p><a href="https://www.runoob.com/java/java8-optional-class.html" target="_blank" rel="noopener" title="Java 8 Optional 类">Java 8 Optional类使用教程</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;案例使用的员工类</span><br><span class="line">List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">personList.add(new Person(&quot;Tom&quot;, 8900, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">personList.add(new Person(&quot;Jack&quot;, 7000, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">personList.add(new Person(&quot;Lily&quot;, 7800, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">personList.add(new Person(&quot;Anni&quot;, 8200, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">personList.add(new Person(&quot;Owen&quot;, 9500, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">personList.add(new Person(&quot;Alisa&quot;, 7900, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">class Person &#123;</span><br><span class="line">	private String name;  &#x2F;&#x2F; 姓名</span><br><span class="line">	private int salary; &#x2F;&#x2F; 薪资</span><br><span class="line">	private int age; &#x2F;&#x2F; 年龄</span><br><span class="line">	private String sex; &#x2F;&#x2F;性别</span><br><span class="line">	private String area;  &#x2F;&#x2F; 地区</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; 构造方法</span><br><span class="line">	public Person(String name, int salary, int age,String sex,String area) &#123;</span><br><span class="line">		this.name &#x3D; name;</span><br><span class="line">		this.salary &#x3D; salary;</span><br><span class="line">		this.age &#x3D; age;</span><br><span class="line">		this.sex &#x3D; sex;</span><br><span class="line">		this.area &#x3D; area;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F; 省略了get和set，请自行添加</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="遍历-匹配（foreach-find-match-findFirst-findAny-anyMatch）"><a href="#遍历-匹配（foreach-find-match-findFirst-findAny-anyMatch）" class="headerlink" title="遍历/匹配（foreach/find/match/findFirst/findAny/anyMatch）"></a>遍历/匹配（foreach/find/match/findFirst/findAny/anyMatch）</h3><p>Stream也是支持类似集合的遍历和匹配元素的，只是Stream中的元素是以Optional类型存在的。Stream的遍历、匹配非常简单<br><img src="/img/%E9%81%8D%E5%8E%86%E4%B8%8E%E5%8C%B9%E9%85%8D.png" alt="遍历与匹配" title="遍历与匹配"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Integer&gt; list &#x3D; Arrays.asList(7, 6, 9, 3, 8, 2, 1);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 遍历输出符合条件的元素</span><br><span class="line">        list.stream().filter(x -&gt; x &gt; 6).forEach(System.out::println);</span><br><span class="line">        &#x2F;&#x2F; 匹配第一个</span><br><span class="line">        Optional&lt;Integer&gt; findFirst &#x3D; list.stream().filter(x -&gt; x &gt; 6).findFirst();</span><br><span class="line">        &#x2F;&#x2F; &lt;font color&#x3D;&quot;red&quot;&gt;匹配任意（适用于并行流）&lt;&#x2F;font&gt;</span><br><span class="line">        Optional&lt;Integer&gt; findAny &#x3D; list.parallelStream().filter(x -&gt; x &gt; 6).findAny();</span><br><span class="line">        &#x2F;&#x2F; 是否包含符合特定条件的元素</span><br><span class="line">        boolean anyMatch &#x3D; list.stream().anyMatch(x -&gt; x &lt; 6);</span><br><span class="line">        System.out.println(&quot;匹配第一个值：&quot; + findFirst.get());</span><br><span class="line">        System.out.println(&quot;匹配任意一个值：&quot; + findAny.get());</span><br><span class="line">        System.out.println(&quot;是否存在大于6的值：&quot; + anyMatch);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="筛选-filter"><a href="#筛选-filter" class="headerlink" title="筛选(filter)"></a>筛选(filter)</h3><p>filter:是按照一定的规则校验流中的元素，将符合条件的元素提取到新的流中的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; 筛选出Integer集合中大于7的元素，并打印出来</span><br><span class="line">		List&lt;Integer&gt; list &#x3D; Arrays.asList(6, 7, 3, 8, 1, 2, 9);</span><br><span class="line">		Stream&lt;Integer&gt; stream &#x3D; list.stream();</span><br><span class="line">		stream.filter(x -&gt; x &gt; 7).forEach(System.out::println);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>预期结果：8 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;筛选员工中工资高于8000的人，并形成新的集合。 形成新集合依赖collect（收集），后文有详细介绍</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">		List&lt;String&gt; fiterList &#x3D; personList.stream().filter(x -&gt; x.getSalary() &gt; 8000).map(Person::getName)</span><br><span class="line">				.collect(Collectors.toList());</span><br><span class="line">		System.out.print(&quot;高于8000的员工姓名：&quot; + fiterList);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>高于8000的员工姓名：[Tom, Anni, Owen]</p>
<h3 id="聚合（max-min-count"><a href="#聚合（max-min-count" class="headerlink" title="聚合（max/min/count)"></a>聚合（max/min/count)</h3><p>max、min、count这些字眼你一定不陌生，没错，在mysql中我们常用它们进行数据统计。Java stream中也引入了这些概念和用法，极大地方便了我们对集合、数组的数据统计工作<br><img src="/img/%E8%81%9A%E5%90%88.png" alt="聚合" title="聚合"></p>
<h4 id="获取String集合中最长的元素"><a href="#获取String集合中最长的元素" class="headerlink" title="获取String集合中最长的元素"></a>获取String集合中最长的元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;String&gt; list &#x3D; Arrays.asList(&quot;adnm&quot;, &quot;admmt&quot;, &quot;pot&quot;, &quot;xbangd&quot;, &quot;weoujgsd&quot;);</span><br><span class="line"></span><br><span class="line">		Optional&lt;String&gt; max &#x3D; list.stream().max(Comparator.comparing(String::length));</span><br><span class="line">		System.out.println(&quot;最长的字符串：&quot; + max.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最长的字符串：weoujgsd</p>
<h4 id="获取Integer集合中的最大值"><a href="#获取Integer集合中的最大值" class="headerlink" title="获取Integer集合中的最大值"></a>获取Integer集合中的最大值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Integer&gt; list &#x3D; Arrays.asList(7, 6, 9, 4, 11, 6);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 自然排序</span><br><span class="line">		Optional&lt;Integer&gt; max &#x3D; list.stream().max(Integer::compareTo);</span><br><span class="line">		&#x2F;&#x2F; 自定义排序</span><br><span class="line">		Optional&lt;Integer&gt; max2 &#x3D; list.stream().max(new Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">			@Override</span><br><span class="line">			public int compare(Integer o1, Integer o2) &#123;</span><br><span class="line">				return o1.compareTo(o2);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		System.out.println(&quot;自然排序的最大值：&quot; + max.get());</span><br><span class="line">		System.out.println(&quot;自定义排序的最大值：&quot; + max2.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自然排序的最大值：11<br>自定义排序的最大值：11</p>
<h4 id="获取员工工资最高的人"><a href="#获取员工工资最高的人" class="headerlink" title="获取员工工资最高的人"></a>获取员工工资最高的人</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">		Optional&lt;Person&gt; max &#x3D; personList.stream().max(Comparator.comparingInt(Person::getSalary));</span><br><span class="line">		System.out.println(&quot;员工工资最大值：&quot; + max.get().getSalary());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>员工工资最大值：9500</p>
<h4 id="计算Integer集合中大于6的元素的个数"><a href="#计算Integer集合中大于6的元素的个数" class="headerlink" title="计算Integer集合中大于6的元素的个数"></a>计算Integer集合中大于6的元素的个数</h4><p>public class StreamTest {<br>    public static void main(String[] args) {<br>        List<Integer> list = Arrays.asList(7, 6, 4, 8, 2, 11, 9);</p>
<pre><code>    long count = list.stream().filter(x -&gt; x &gt; 6).count();
    System.out.println(&quot;list中大于6的元素个数：&quot; + count);
}</code></pre><p>}<br>list中大于6的元素个数：4</p>
<h4 id="映射-map-flatMap"><a href="#映射-map-flatMap" class="headerlink" title="映射(map/flatMap)"></a>映射(map/flatMap)</h4><p>映射，可以将一个流的元素按照一定的映射规则映射到另一个流中。分为map和flatMap：</p>
<ul>
<li>map：接收一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素。</li>
<li>flatMap：接收一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流连接成一个流。<br><img src="/img/%E6%98%A0%E5%B0%84.png" alt="映射" title="映射"></li>
</ul>
<h4 id="英文字符串数组的元素全部改为大写。整数数组每个元素-3"><a href="#英文字符串数组的元素全部改为大写。整数数组每个元素-3" class="headerlink" title="英文字符串数组的元素全部改为大写。整数数组每个元素+3"></a>英文字符串数组的元素全部改为大写。整数数组每个元素+3</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		String[] strArr &#x3D; &#123; &quot;abcd&quot;, &quot;bcdd&quot;, &quot;defde&quot;, &quot;fTr&quot; &#125;;</span><br><span class="line">		List&lt;String&gt; strList &#x3D; Arrays.stream(strArr).map(String::toUpperCase).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">		List&lt;Integer&gt; intList &#x3D; Arrays.asList(1, 3, 5, 7, 9, 11);</span><br><span class="line">		List&lt;Integer&gt; intListNew &#x3D; intList.stream().map(x -&gt; x + 3).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;每个元素大写：&quot; + strList);</span><br><span class="line">		System.out.println(&quot;每个元素+3：&quot; + intListNew);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每个元素大写：[ABCD, BCDD, DEFDE, FTR]<br>每个元素+3：[4, 6, 8, 10, 12, 14]</p>
<h4 id="将员工的薪资全部增加1000"><a href="#将员工的薪资全部增加1000" class="headerlink" title="将员工的薪资全部增加1000"></a>将员工的薪资全部增加1000</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 不改变原来员工集合的方式</span><br><span class="line">		List&lt;Person&gt; personListNew &#x3D; personList.stream().map(person -&gt; &#123;</span><br><span class="line">			Person personNew &#x3D; new Person(person.getName(), 0, 0, null, null);</span><br><span class="line">			personNew.setSalary(person.getSalary() + 10000);</span><br><span class="line">			return personNew;</span><br><span class="line">		&#125;).collect(Collectors.toList());</span><br><span class="line">		System.out.println(&quot;一次改动前：&quot; + personList.get(0).getName() + &quot;--&gt;  &quot; + personList.get(0).getSalary());</span><br><span class="line">		System.out.println(&quot;一次改动后：&quot; + personListNew.get(0).getName() + &quot;--&gt;&quot; + personListNew.get(0).getSalary());</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 改变原来员工集合的方式</span><br><span class="line">		List&lt;Person&gt; personListNew2 &#x3D; personList.stream().map(person -&gt; &#123;</span><br><span class="line">			person.setSalary(person.getSalary() + 10000);</span><br><span class="line">			return person;</span><br><span class="line">		&#125;).collect(Collectors.toList());</span><br><span class="line">		System.out.println(&quot;二次改动前：&quot; + personList.get(0).getName() + &quot;--&gt;&quot; + personListNew.get(0).getSalary());</span><br><span class="line">		System.out.println(&quot;二次改动后：&quot; + personListNew2.get(0).getName() + &quot;--&gt;&quot; + personListNew.get(0).getSalary());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一次改动前：Tom–&gt;8900<br>一次改动后：Tom–&gt;18900<br>二次改动前：Tom–&gt;18900<br>二次改动后：Tom–&gt;18900</p>
<h4 id="将两个字符数组合并成一个新的字符数组"><a href="#将两个字符数组合并成一个新的字符数组" class="headerlink" title="将两个字符数组合并成一个新的字符数组"></a>将两个字符数组合并成一个新的字符数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;String&gt; list &#x3D; Arrays.asList(&quot;m,k,l,a&quot;, &quot;1,3,5,7&quot;);</span><br><span class="line">		List&lt;String&gt; listNew &#x3D; list.stream().flatMap(s -&gt; &#123;</span><br><span class="line">			&#x2F;&#x2F; 将每个元素转换成一个stream</span><br><span class="line">			String[] split &#x3D; s.split(&quot;,&quot;);</span><br><span class="line">			Stream&lt;String&gt; s2 &#x3D; Arrays.stream(split);</span><br><span class="line">			return s2;</span><br><span class="line">		&#125;).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;处理前的集合：&quot; + list);</span><br><span class="line">		System.out.println(&quot;处理后的集合：&quot; + listNew);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>处理前的集合：[m-k-l-a, 1-3-5]<br>处理后的集合：[m, k, l, a, 1, 3, 5]</p>
<h3 id="归约-reduce"><a href="#归约-reduce" class="headerlink" title="归约(reduce)"></a>归约(reduce)</h3><p>归约，也称缩减，顾名思义，是把一个流缩减成一个值，能实现对集合求和、求乘积和求最值操作<br><a href="/img/归集(Stream).png" title="归集(Stream)">归集(Stream)</a></p>
<h4 id="求Integer集合的元素之和、乘积和最大值"><a href="#求Integer集合的元素之和、乘积和最大值" class="headerlink" title="求Integer集合的元素之和、乘积和最大值"></a>求Integer集合的元素之和、乘积和最大值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Integer&gt; list &#x3D; Arrays.asList(1, 3, 2, 8, 11, 4);</span><br><span class="line">		&#x2F;&#x2F; 求和方式1</span><br><span class="line">		Optional&lt;Integer&gt; sum &#x3D; list.stream().reduce((x, y) -&gt; x + y);</span><br><span class="line">		&#x2F;&#x2F; 求和方式2</span><br><span class="line">		Optional&lt;Integer&gt; sum2 &#x3D; list.stream().reduce(Integer::sum);</span><br><span class="line">		&#x2F;&#x2F; 求和方式3</span><br><span class="line">		Integer sum3 &#x3D; list.stream().reduce(0, Integer::sum);</span><br><span class="line">		</span><br><span class="line">		&#x2F;&#x2F; 求乘积</span><br><span class="line">		Optional&lt;Integer&gt; product &#x3D; list.stream().reduce((x, y) -&gt; x * y);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 求最大值方式1</span><br><span class="line">		Optional&lt;Integer&gt; max &#x3D; list.stream().reduce((x, y) -&gt; x &gt; y ? x : y);</span><br><span class="line">		&#x2F;&#x2F; 求最大值写法2</span><br><span class="line">		Integer max2 &#x3D; list.stream().reduce(1, Integer::max);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;list求和：&quot; + sum.get() + &quot;,&quot; + sum2.get() + &quot;,&quot; + sum3);</span><br><span class="line">		System.out.println(&quot;list求积：&quot; + product.get());</span><br><span class="line">		System.out.println(&quot;list求和：&quot; + max.get() + &quot;,&quot; + max2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>list求和：29,29,29<br>list求积：2112<br>list求和：11,11</p>
<h4 id="求所有员工的工资之和和最高工资"><a href="#求所有员工的工资之和和最高工资" class="headerlink" title="求所有员工的工资之和和最高工资"></a>求所有员工的工资之和和最高工资</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Owen&quot;, 9500, 25, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Alisa&quot;, 7900, 26, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 求工资之和方式1：</span><br><span class="line">		Optional&lt;Integer&gt; sumSalary &#x3D; personList.stream().map(Person::getSalary).reduce(Integer::sum);</span><br><span class="line">		&#x2F;&#x2F; 求工资之和方式2：</span><br><span class="line">		Integer sumSalary2 &#x3D; personList.stream().reduce(0, (sum, p) -&gt; sum +&#x3D; p.getSalary(),</span><br><span class="line">				(sum1, sum2) -&gt; sum1 + sum2);</span><br><span class="line">		&#x2F;&#x2F; 求工资之和方式3：</span><br><span class="line">		Integer sumSalary3 &#x3D; personList.stream().reduce(0, (sum, p) -&gt; sum +&#x3D; p.getSalary(), Integer::sum);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 求最高工资方式1：</span><br><span class="line">		Integer maxSalary &#x3D; personList.stream().reduce(0, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(),</span><br><span class="line">				Integer::max);</span><br><span class="line">		&#x2F;&#x2F; 求最高工资方式2：</span><br><span class="line">		Integer maxSalary2 &#x3D; personList.stream().reduce(0, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(),</span><br><span class="line">				(max1, max2) -&gt; max1 &gt; max2 ? max1 : max2);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;工资之和：&quot; + sumSalary.get() + &quot;,&quot; + sumSalary2 + &quot;,&quot; + sumSalary3);</span><br><span class="line">		System.out.println(&quot;最高工资：&quot; + maxSalary + &quot;,&quot; + maxSalary2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>工资之和：49300,49300,49300<br>最高工资：9500,9500</p>
<h3 id="收集-collect"><a href="#收集-collect" class="headerlink" title="收集(collect)"></a>收集(collect)</h3><p>collect:可以说是内容最繁多、功能最丰富的部分了。从字面上去理解，就是把一个流收集起来，最终可以是收集成一个值也可以收集成一个新的集合<br>collect主要依赖java.util.stream.Collectors类内置的静态方法</p>
<h4 id="归集-toList-toSet-toMap"><a href="#归集-toList-toSet-toMap" class="headerlink" title="归集(toList/toSet/toMap)"></a>归集(toList/toSet/toMap)</h4><p>因为流不存储数据，那么在流中的数据完成处理后，需要将流中的数据重新归集到新的集合里。toList、toSet和toMap比较常用，另外还有toCollection、toConcurrentMap等复杂一些的用法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Integer&gt; list &#x3D; Arrays.asList(1, 6, 3, 4, 6, 7, 9, 6, 20);</span><br><span class="line">		List&lt;Integer&gt; listNew &#x3D; list.stream().filter(x -&gt; x % 2 &#x3D;&#x3D; 0).collect(Collectors.toList());</span><br><span class="line">		Set&lt;Integer&gt; set &#x3D; list.stream().filter(x -&gt; x % 2 &#x3D;&#x3D; 0).collect(Collectors.toSet());</span><br><span class="line"></span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Anni&quot;, 8200, 24, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		</span><br><span class="line">		Map&lt;?, Person&gt; map &#x3D; personList.stream().filter(p -&gt; p.getSalary() &gt; 8000)</span><br><span class="line">				.collect(Collectors.toMap(Person::getName, p -&gt; p));</span><br><span class="line">		System.out.println(&quot;toList:&quot; + listNew);</span><br><span class="line">		System.out.println(&quot;toSet:&quot; + set);</span><br><span class="line">		System.out.println(&quot;toMap:&quot; + map);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>toList：[6, 4, 6, 6, 20]<br>toSet：[4, 20, 6]<br>toMap：{Tom=mutest.Person@5fd0d5ae, Anni=mutest.Person@2d98a335}</p>
<h4 id="统计-count-averaging"><a href="#统计-count-averaging" class="headerlink" title="统计(count/averaging)"></a>统计(count/averaging)</h4><p>Collectors提供了一系列用于数据统计的静态方法：</p>
<ul>
<li>计数：count</li>
<li>平均值：averagingInt、averagingLong、averagingDouble</li>
<li>最值：maxBy、minBy</li>
<li>求和：summingInt、summingLong、summingDouble<br>统计以上所有：summarizingInt、summarizingLong、summarizingDouble<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;统计员工人数、平均工资、工资总额、最高工资</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 求总数</span><br><span class="line">		Long count &#x3D; personList.stream().collect(Collectors.counting());</span><br><span class="line">		&#x2F;&#x2F; 求平均工资</span><br><span class="line">		Double average &#x3D; personList.stream().collect(Collectors.averagingDouble(Person::getSalary));</span><br><span class="line">		&#x2F;&#x2F; 求最高工资</span><br><span class="line">		Optional&lt;Integer&gt; max &#x3D; personList.stream().map(Person::getSalary).collect(Collectors.maxBy(Integer::compare));</span><br><span class="line">		&#x2F;&#x2F; 求工资之和</span><br><span class="line">		Integer sum &#x3D; personList.stream().collect(Collectors.summingInt(Person::getSalary));</span><br><span class="line">		&#x2F;&#x2F; 一次性统计所有信息</span><br><span class="line">		DoubleSummaryStatistics collect &#x3D; personList.stream().collect(Collectors.summarizingDouble(Person::getSalary));</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;员工总数：&quot; + count);</span><br><span class="line">		System.out.println(&quot;员工平均工资：&quot; + average);</span><br><span class="line">		System.out.println(&quot;员工工资总和：&quot; + sum);</span><br><span class="line">		System.out.println(&quot;员工工资所有统计：&quot; + collect);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
员工总数：3<br>员工平均工资：7900.0<br>员工工资总和：23700<br>员工工资所有统计：DoubleSummaryStatistics{count=3, sum=23700.000000,min=7000.000000, average=7900.000000, max=8900.000000}</li>
</ul>
<h4 id="分组-partitioningBy-groupingBy"><a href="#分组-partitioningBy-groupingBy" class="headerlink" title="分组(partitioningBy/groupingBy)"></a>分组(partitioningBy/groupingBy)</h4><ul>
<li>分区：将stream按条件分为两个Map，比如员工按薪资是否高于8000分为两部分。</li>
<li>分组：将集合分为多个Map，比如员工按性别分组。有单级分组和多级分组。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;将员工按薪资是否高于8000分为两部分；将员工按性别和地区分组</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Anni&quot;, 8200, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Owen&quot;, 9500, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Alisa&quot;, 7900, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 将员工按薪资是否高于8000分组</span><br><span class="line">        Map&lt;Boolean, List&lt;Person&gt;&gt; part &#x3D; personList.stream().collect(Collectors.partitioningBy(x -&gt; x.getSalary() &gt; 8000));</span><br><span class="line">        &#x2F;&#x2F; 将员工按性别分组</span><br><span class="line">        Map&lt;String, List&lt;Person&gt;&gt; group &#x3D; personList.stream().collect(Collectors.groupingBy(Person::getSex));</span><br><span class="line">        &#x2F;&#x2F; 将员工先按性别分组，再按地区分组</span><br><span class="line">        Map&lt;String, Map&lt;String, List&lt;Person&gt;&gt;&gt; group2 &#x3D; personList.stream().collect(Collectors.groupingBy(Person::getSex, Collectors.groupingBy(Person::getArea)));</span><br><span class="line">        System.out.println(&quot;员工按薪资是否大于8000分组情况：&quot; + part);</span><br><span class="line">        System.out.println(&quot;员工按性别分组情况：&quot; + group);</span><br><span class="line">        System.out.println(&quot;员工按性别、地区：&quot; + group2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
员工按薪资是否大于8000分组情况：{false=[mutest.Person@2d98a335, mutest.Person@16b98e56, mutest.Person@7ef20235], true=[mutest.Person@27d6c5e0, mutest.Person@4f3f5b24, mutest.Person@15aeb7ab]}<br>员工按性别分组情况：{female=[mutest.Person@16b98e56, mutest.Person@4f3f5b24, mutest.Person@7ef20235], male=[mutest.Person@27d6c5e0, mutest.Person@2d98a335, mutest.Person@15aeb7ab]}<br>员工按性别、地区：{female={New York=[mutest.Person@4f3f5b24, mutest.Person@7ef20235], Washington=[mutest.Person@16b98e56]}, male={New York=[mutest.Person@27d6c5e0, mutest.Person@15aeb7ab], Washington=[mutest.Person@2d98a335]}}</li>
</ul>
<h4 id="接合-joining"><a href="#接合-joining" class="headerlink" title="接合(joining)"></a>接合(joining)</h4><p>joining:可以将stream中的元素用特定的连接符（没有的话，则直接连接）连接成一个字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line"></span><br><span class="line">		String names &#x3D; personList.stream().map(p -&gt; p.getName()).collect(Collectors.joining(&quot;,&quot;));</span><br><span class="line">		System.out.println(&quot;所有员工的姓名：&quot; + names);</span><br><span class="line">		List&lt;String&gt; list &#x3D; Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);</span><br><span class="line">		String string &#x3D; list.stream().collect(Collectors.joining(&quot;-&quot;));</span><br><span class="line">		System.out.println(&quot;拼接后的字符串：&quot; + string);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有员工的姓名：Tom,Jack,Lily<br>拼接后的字符串：A-B-C</p>
<h4 id="归约-reducing"><a href="#归约-reducing" class="headerlink" title="归约(reducing)"></a>归约(reducing)</h4><p>Collectors类提供的reducing方法，相比于stream本身的reduce方法，增加了对自定义归约的支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 23, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 7000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 7800, 21, &quot;female&quot;, &quot;Washington&quot;));</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 每个员工减去起征点后的薪资之和（这个例子并不严谨，但一时没想到好的例子）</span><br><span class="line">		Integer sum &#x3D; personList.stream().collect(Collectors.reducing(0, Person::getSalary, (i, j) -&gt; (i + j - 5000)));</span><br><span class="line">		System.out.println(&quot;员工扣税薪资总和：&quot; + sum);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; stream的reduce</span><br><span class="line">		Optional&lt;Integer&gt; sum2 &#x3D; personList.stream().map(Person::getSalary).reduce(Integer::sum);</span><br><span class="line">		System.out.println(&quot;员工薪资总和：&quot; + sum2.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>员工扣税薪资总和：8700<br>员工薪资总和：23700</p>
<h3 id="排序-sorted"><a href="#排序-sorted" class="headerlink" title="排序(sorted)"></a>排序(sorted)</h3><ul>
<li>sorted()：自然排序，流中元素需实现Comparable接口</li>
<li>sorted(Comparator com)：Comparator排序器自定义排序<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		List&lt;Person&gt; personList &#x3D; new ArrayList&lt;Person&gt;();</span><br><span class="line"></span><br><span class="line">		personList.add(new Person(&quot;Sherry&quot;, 9000, 24, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Tom&quot;, 8900, 22, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Jack&quot;, 9000, 25, &quot;male&quot;, &quot;Washington&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Lily&quot;, 8800, 26, &quot;male&quot;, &quot;New York&quot;));</span><br><span class="line">		personList.add(new Person(&quot;Alisa&quot;, 9000, 26, &quot;female&quot;, &quot;New York&quot;));</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; 按工资升序排序（自然排序）</span><br><span class="line">		List&lt;String&gt; newList &#x3D; personList.stream().sorted(Comparator.comparing(Person::getSalary)).map(Person::getName)</span><br><span class="line">				.collect(Collectors.toList());</span><br><span class="line">		&#x2F;&#x2F; 按工资倒序排序</span><br><span class="line">		List&lt;String&gt; newList2 &#x3D; personList.stream().sorted(Comparator.comparing(Person::getSalary).reversed())</span><br><span class="line">				.map(Person::getName).collect(Collectors.toList());</span><br><span class="line">		&#x2F;&#x2F; 先按工资再按年龄升序排序</span><br><span class="line">		List&lt;String&gt; newList3 &#x3D; personList.stream()</span><br><span class="line">				.sorted(Comparator.comparing(Person::getSalary).thenComparing(Person::getAge)).map(Person::getName)</span><br><span class="line">				.collect(Collectors.toList());</span><br><span class="line">		&#x2F;&#x2F; 先按工资再按年龄自定义排序（降序）</span><br><span class="line">		List&lt;String&gt; newList4 &#x3D; personList.stream().sorted((p1, p2) -&gt; &#123;</span><br><span class="line">			if (p1.getSalary() &#x3D;&#x3D; p2.getSalary()) &#123;</span><br><span class="line">				return p2.getAge() - p1.getAge();</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				return p2.getSalary() - p1.getSalary();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;).map(Person::getName).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;按工资升序排序：&quot; + newList);</span><br><span class="line">		System.out.println(&quot;按工资降序排序：&quot; + newList2);</span><br><span class="line">		System.out.println(&quot;先按工资再按年龄升序排序：&quot; + newList3);</span><br><span class="line">		System.out.println(&quot;先按工资再按年龄自定义降序排序：&quot; + newList4);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
按工资自然排序：[Lily, Tom, Sherry, Jack, Alisa]<br>按工资降序排序：[Sherry, Jack, Alisa,Tom, Lily]<br>先按工资再按年龄自然排序：[Sherry, Jack, Alisa, Tom, Lily]<br>先按工资再按年龄自定义降序排序：[Alisa, Jack, Sherry, Tom, Lily]</li>
</ul>
<h3 id="提取-组合"><a href="#提取-组合" class="headerlink" title="提取/组合"></a>提取/组合</h3><p>流也可以进行合并、去重、限制、跳过等操作</p>
<p><img src="/img/Stream-%E6%8F%90%E5%8F%961.png" alt="Stream-提取" title="Stream-提取"><br><img src="/img/Stream-%E6%8F%90%E5%8F%962.png" alt="Stream-提取" title="Stream-提取"><br><img src="/img/Stream-%E6%8F%90%E5%8F%963.png" alt="Stream-提取" title="Stream-提取"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class StreamTest &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		String[] arr1 &#x3D; &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; &#125;;</span><br><span class="line">		String[] arr2 &#x3D; &#123; &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot; &#125;;</span><br><span class="line"></span><br><span class="line">		Stream&lt;String&gt; stream1 &#x3D; Stream.of(arr1);</span><br><span class="line">		Stream&lt;String&gt; stream2 &#x3D; Stream.of(arr2);</span><br><span class="line">		&#x2F;&#x2F; concat:合并两个流 distinct：去重</span><br><span class="line">		List&lt;String&gt; newList &#x3D; Stream.concat(stream1, stream2).distinct().collect(Collectors.toList());</span><br><span class="line">		&#x2F;&#x2F; limit：限制从流中获得前n个数据</span><br><span class="line">		List&lt;Integer&gt; collect &#x3D; Stream.iterate(1, x -&gt; x + 2).limit(10).collect(Collectors.toList());</span><br><span class="line">		&#x2F;&#x2F; skip：跳过前n个数据</span><br><span class="line">		List&lt;Integer&gt; collect2 &#x3D; Stream.iterate(1, x -&gt; x + 2).skip(1).limit(5).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;流合并：&quot; + newList);</span><br><span class="line">		System.out.println(&quot;limit：&quot; + collect);</span><br><span class="line">		System.out.println(&quot;skip：&quot; + collect2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>流合并：[a, b, c, d, e, f, g]<br>limit：[1, 3, 5, 7, 9, 11, 13, 15, 17, 19]<br>skip：[3, 5, 7, 9, 11]</p>
<p>##Optional常用方法</p>
<ul>
<li>创建 Optional 对象，使用of(T) 或者 ofNullable(T)，它们的不同点在于对于传入的参数为null时，是如何处理的。</li>
<li>of(T) 如果传入的参数为null，会报NullPointerException</li>
<li>ofNullable(T) 如果传入的参数为null，它会返回一个empty的Optional对象。</li>
<li>ifPresent() 判断是否有值（不推荐直接使用这个方法，看看是否可以使用orElse(T)方法）</li>
<li>get() 获取值；这个方法迷惑性比较大，如果直接调用，在没有值的情况下，会报NoSuchElementException异常。</li>
<li>设置默认值，orElse(T) 或者 orElseGet(T)；orElseGet(T)是orElse(T)的延迟调用版。</li>
<li>orElseThrow(T) 没有值的情况抛异常</li>
</ul>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Stream/" rel="tag"># Stream</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/02/19/%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%A7%84%E8%8C%83/" rel="next" title="数据库规范">
                <i class="fa fa-chevron-left"></i> 数据库规范
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/02/19/FroEnd-%E6%89%AB%E7%A0%81%E7%99%BB%E9%99%86/" rel="prev" title="实现扫码登录的方案与原理">
                实现扫码登录的方案与原理 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/header.jpg"
                alt="cdongtao" />
            
              <p class="site-author-name" itemprop="name">cdongtao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/%20%7C%7C%20archive">
                
                    <span class="site-state-item-count">149</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">155</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yourname" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:441623928@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法引用-双冒号"><span class="nav-number">1.</span> <span class="nav-text">方法引用( 双冒号:: )</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用"><span class="nav-number">1.1.</span> <span class="nav-text">使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Stream概述"><span class="nav-number">2.</span> <span class="nav-text">Stream概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Stream的创建"><span class="nav-number">3.</span> <span class="nav-text">Stream的创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通过-java-util-Collection-stream-方法用集合创建流"><span class="nav-number">3.1.</span> <span class="nav-text">通过 java.util.Collection.stream() 方法用集合创建流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用java-util-Arrays-stream-T-array-方法用数组创建流"><span class="nav-number">3.2.</span> <span class="nav-text">使用java.util.Arrays.stream(T[] array)方法用数组创建流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用Stream的静态方法：of-、iterate-、generate"><span class="nav-number">3.3.</span> <span class="nav-text">使用Stream的静态方法：of()、iterate()、generate()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stream和parallelStream的简单区分："><span class="nav-number">3.4.</span> <span class="nav-text">stream和parallelStream的简单区分：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Stream的使用"><span class="nav-number">4.</span> <span class="nav-text">Stream的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#遍历-匹配（foreach-find-match-findFirst-findAny-anyMatch）"><span class="nav-number">4.1.</span> <span class="nav-text">遍历&#x2F;匹配（foreach&#x2F;find&#x2F;match&#x2F;findFirst&#x2F;findAny&#x2F;anyMatch）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#筛选-filter"><span class="nav-number">4.2.</span> <span class="nav-text">筛选(filter)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#聚合（max-min-count"><span class="nav-number">4.3.</span> <span class="nav-text">聚合（max&#x2F;min&#x2F;count)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取String集合中最长的元素"><span class="nav-number">4.3.1.</span> <span class="nav-text">获取String集合中最长的元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取Integer集合中的最大值"><span class="nav-number">4.3.2.</span> <span class="nav-text">获取Integer集合中的最大值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取员工工资最高的人"><span class="nav-number">4.3.3.</span> <span class="nav-text">获取员工工资最高的人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#计算Integer集合中大于6的元素的个数"><span class="nav-number">4.3.4.</span> <span class="nav-text">计算Integer集合中大于6的元素的个数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#映射-map-flatMap"><span class="nav-number">4.3.5.</span> <span class="nav-text">映射(map&#x2F;flatMap)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#英文字符串数组的元素全部改为大写。整数数组每个元素-3"><span class="nav-number">4.3.6.</span> <span class="nav-text">英文字符串数组的元素全部改为大写。整数数组每个元素+3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将员工的薪资全部增加1000"><span class="nav-number">4.3.7.</span> <span class="nav-text">将员工的薪资全部增加1000</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将两个字符数组合并成一个新的字符数组"><span class="nav-number">4.3.8.</span> <span class="nav-text">将两个字符数组合并成一个新的字符数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#归约-reduce"><span class="nav-number">4.4.</span> <span class="nav-text">归约(reduce)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#求Integer集合的元素之和、乘积和最大值"><span class="nav-number">4.4.1.</span> <span class="nav-text">求Integer集合的元素之和、乘积和最大值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#求所有员工的工资之和和最高工资"><span class="nav-number">4.4.2.</span> <span class="nav-text">求所有员工的工资之和和最高工资</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#收集-collect"><span class="nav-number">4.5.</span> <span class="nav-text">收集(collect)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#归集-toList-toSet-toMap"><span class="nav-number">4.5.1.</span> <span class="nav-text">归集(toList&#x2F;toSet&#x2F;toMap)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#统计-count-averaging"><span class="nav-number">4.5.2.</span> <span class="nav-text">统计(count&#x2F;averaging)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组-partitioningBy-groupingBy"><span class="nav-number">4.5.3.</span> <span class="nav-text">分组(partitioningBy&#x2F;groupingBy)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#接合-joining"><span class="nav-number">4.5.4.</span> <span class="nav-text">接合(joining)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#归约-reducing"><span class="nav-number">4.5.5.</span> <span class="nav-text">归约(reducing)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#排序-sorted"><span class="nav-number">4.6.</span> <span class="nav-text">排序(sorted)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#提取-组合"><span class="nav-number">4.7.</span> <span class="nav-text">提取&#x2F;组合</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cdongtao</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">324k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">4:54</span>
  
</div>








  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Mist</a> v6.4.1</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'uASAKzQTPhuJIplOaklnAaqK-gzGzoHsz',
        appKey: 'LRW155uTAdoeaAjf9q9D53Ps',
        placeholder: 'Welcome to comment!',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: false
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
